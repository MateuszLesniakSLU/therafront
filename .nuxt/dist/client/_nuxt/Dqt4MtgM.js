import{_ as c}from"./BoxhHWeB.js";import{u as f,r as d,n as k,y as z,c as a,a as e,b as v,d as o,t as r,F as b,x as w,w as y,o as l}from"./m7XX1WG5.js";import{a as g}from"./DW_MHI2K.js";const B={class:"p-4"},_={key:0,class:"text-center"},$={key:1},j={key:2},P=f({__name:"[id]",setup(S){const x=z(),n=d(null),p=d([]),m=d(!0);return k(async()=>{const u=x.params.id;try{const t=localStorage.getItem("token"),i=await g.get(`http://localhost:3000/patients/${u}`,{headers:{Authorization:`Bearer ${t}`}});n.value=i.data;const s=await g.get(`http://localhost:3000/patients/${u}/surveys`,{headers:{Authorization:`Bearer ${t}`}});p.value=s.data}catch(t){console.error("Błąd podczas pobierania szczegółów pacjenta:",t)}finally{m.value=!1}}),(u,t)=>{const i=c;return l(),a("div",B,[t[9]||(t[9]=e("h1",{class:"text-3xl font-bold mb-4"},"Szczegóły Pacjenta",-1)),m.value?(l(),a("div",_,"Ładowanie...")):n.value?(l(),a("div",$,[e("p",null,[t[0]||(t[0]=e("strong",null,"Imię i nazwisko:",-1)),o(" "+r(n.value.name),1)]),e("p",null,[t[1]||(t[1]=e("strong",null,"Email:",-1)),o(" "+r(n.value.email),1)]),e("p",null,[t[2]||(t[2]=e("strong",null,"Telefon:",-1)),o(" "+r(n.value.phone),1)]),t[7]||(t[7]=e("h2",{class:"text-2xl font-semibold mt-4"},"Historia Ankiet",-1)),e("ul",null,[(l(!0),a(b,null,w(p.value,s=>(l(),a("li",{key:s.id,class:"border p-2 my-2"},[e("p",null,[t[3]||(t[3]=e("strong",null,"Data:",-1)),o(" "+r(s.date),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Ocena nastroju:",-1)),o(" "+r(s.moodScore),1)]),v(i,{to:`/doctor/patients/${n.value.id}/surveys/${s.id}`,class:"text-blue-500 hover:underline"},{default:y(()=>t[5]||(t[5]=[o(" Szczegóły ankiety ")])),_:2},1032,["to"])]))),128))]),v(i,{to:"/doctor/dashboard",class:"text-blue-500 hover:underline"},{default:y(()=>t[6]||(t[6]=[o(" Powrót do listy pacjentów ")])),_:1})])):(l(),a("div",j,t[8]||(t[8]=[e("p",null,"Pacjent nie znaleziony",-1)])))])}}});export{P as default};
