import{u as S,r as f,G as I,n as F,c as l,a as t,p as r,t as s,s as M,q as a,v as u,F as x,x as g,J as k,o as i,K as V,d}from"./m7XX1WG5.js";import{a as b}from"./DW_MHI2K.js";const N={class:"p-4"},T={class:"p-4 bg-white rounded shadow mb-4"},U={key:0},C={key:1},O={key:2,class:"mt-4"},A={class:"flex flex-wrap gap-2"},D=["value"],R={key:0},P={key:1},q={key:2},B={class:"p-4 bg-white rounded shadow"},J={key:0},W={key:1,class:"space-y-2"},H={key:0},L={key:1},Z={key:2},Q=S({__name:"survey",setup(G){const v=f(!1),n=f({patientId:"",moodScore:5,moodInfluencingFactors:[],customFactor:"",positiveEvents:"",negativeEvents:"",eventsImpact:5,tookMedication:!0,medicationNotTakenReason:"",sideEffectsOccurred:!1,sideEffectsDescription:"",postMedicationFeeling:5,medicationEffectiveness:"unknown",medicationEffectivenessReason:""}),z=["Stres","Zmęczenie","Spotkanie z bliskimi","Aktywność fizyczna","Terapia","Problemy w pracy/szkole","Sen (za mało/za dużo)"],y=f([]);async function w(){const m=localStorage.getItem("patientId")??"";try{const e=await b.get("http://localhost:3000/surveys",{params:{patientId:m}});y.value=e.data}catch(e){console.error("Błąd podczas pobierania ankiet:",e)}}const p=I(()=>{const m=new Date().toISOString().slice(0,10);return y.value.find(e=>e.date===m)});function c(){v.value=!v.value,v.value&&p.value&&Object.assign(n.value,p.value)}async function E(){const m=localStorage.getItem("patientId")??"";n.value.patientId=m;try{if(p.value){const e=await b.patch(`http://localhost:3000/surveys/${p.value.id}`,n.value);console.log("Ankieta zaktualizowana:",e.data)}else{const e=await b.post("http://localhost:3000/surveys",n.value);console.log("Ankieta utworzona:",e.data)}await w(),v.value=!1}catch(e){console.error("Błąd podczas zapisywania ankiety:",e)}}return F(async()=>{await w()}),(m,e)=>(i(),l("div",N,[e[45]||(e[45]=t("h2",{class:"text-2xl font-bold mb-4"},"Ankiety",-1)),t("div",T,[e[29]||(e[29]=t("h3",{class:"text-xl font-bold"},"Codzienna Ankieta",-1)),p.value?(i(),l("p",U," Masz już wypełnioną ankietę na dzisiaj. Możesz ją edytować do końca dnia. ")):(i(),l("p",C," Wypełnij ankietę, aby monitorować swoje samopoczucie. ")),t("button",{onClick:c,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mt-2"},s(p.value?"Edytuj Ankietę":"Wypełnij Ankietę"),1),v.value?(i(),l("div",O,[t("form",{onSubmit:M(E,["prevent"]),class:"space-y-4"},[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"Jak się dzisiaj czujesz? (1-10)",-1)),a(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=o=>n.value.moodScore=o),min:"1",max:"10",class:"w-full border rounded px-2 py-1",required:""},null,512),[[u,n.value.moodScore,void 0,{number:!0}]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"Co miało wpływ na Twój nastrój?",-1)),t("div",A,[(i(),l(x,null,g(z,o=>t("label",{key:o,class:"inline-flex items-center"},[a(t("input",{type:"checkbox",value:o,"onUpdate:modelValue":e[1]||(e[1]=j=>n.value.moodInfluencingFactors=j),class:"mr-1"},null,8,D),[[V,n.value.moodInfluencingFactors]]),t("span",null,s(o),1)])),64))]),a(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>n.value.customFactor=o),placeholder:"Inny czynnik",class:"w-full border rounded px-2 py-1 mt-2"},null,512),[[u,n.value.customFactor]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700"},"Co pozytywnego wydarzyło się dzisiaj?",-1)),a(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.value.positiveEvents=o),class:"w-full border rounded px-2 py-1",rows:"2",required:""},null,512),[[u,n.value.positiveEvents]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700"},"Co negatywnego wydarzyło się dzisiaj?",-1)),a(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>n.value.negativeEvents=o),class:"w-full border rounded px-2 py-1",rows:"2",required:""},null,512),[[u,n.value.negativeEvents]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700"},"Jaki wpływ miały te wydarzenia na Twój nastrój? (1-10)",-1)),a(t("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=o=>n.value.eventsImpact=o),min:"1",max:"10",class:"w-full border rounded px-2 py-1",required:""},null,512),[[u,n.value.eventsImpact,void 0,{number:!0}]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700"},"Czy zażyłeś dzisiaj leki?",-1)),a(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>n.value.tookMedication=o),class:"w-full border rounded px-2 py-1"},e[18]||(e[18]=[t("option",{value:!0},"Tak",-1),t("option",{value:!1},"Nie",-1)]),512),[[k,n.value.tookMedication]])]),n.value.tookMedication?r("",!0):(i(),l("div",R,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700"},"Podaj powód niezażycia leków:",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=o=>n.value.medicationNotTakenReason=o),class:"w-full border rounded px-2 py-1"},null,512),[[u,n.value.medicationNotTakenReason]])])),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700"},"Czy wystąpiły efekty uboczne?",-1)),a(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>n.value.sideEffectsOccurred=o),class:"w-full border rounded px-2 py-1"},e[21]||(e[21]=[t("option",{value:!0},"Tak",-1),t("option",{value:!1},"Nie",-1)]),512),[[k,n.value.sideEffectsOccurred]])]),n.value.sideEffectsOccurred?(i(),l("div",P,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700"},"Opisz efekty uboczne:",-1)),a(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=o=>n.value.sideEffectsDescription=o),class:"w-full border rounded px-2 py-1",rows:"2"},null,512),[[u,n.value.sideEffectsDescription]])])):r("",!0),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700"},"Jak się czułeś po lekach? (1-10)",-1)),a(t("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=o=>n.value.postMedicationFeeling=o),min:"1",max:"10",class:"w-full border rounded px-2 py-1",required:""},null,512),[[u,n.value.postMedicationFeeling,void 0,{number:!0}]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700"},"Czy farmakoterapia jest skuteczna?",-1)),a(t("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>n.value.medicationEffectiveness=o),class:"w-full border rounded px-2 py-1"},e[25]||(e[25]=[t("option",{value:"yes"},"Tak",-1),t("option",{value:"no"},"Nie",-1),t("option",{value:"unknown"},"Nie wiem",-1)]),512),[[k,n.value.medicationEffectiveness]])]),n.value.medicationEffectiveness==="no"?(i(),l("div",q,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700"},"Podaj powód:",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=o=>n.value.medicationEffectivenessReason=o),class:"w-full border rounded px-2 py-1"},null,512),[[u,n.value.medicationEffectivenessReason]])])):r("",!0),e[28]||(e[28]=t("button",{type:"submit",class:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"}," Zapisz Ankietę ",-1))],32)])):r("",!0)]),t("div",B,[e[44]||(e[44]=t("h3",{class:"text-xl font-bold"},"Historia Ankiet",-1)),y.value.length===0?(i(),l("div",J,e[30]||(e[30]=[t("p",null,"Brak zapisanych ankiet.",-1)]))):(i(),l("ul",W,[(i(!0),l(x,null,g(y.value,o=>(i(),l("li",{key:o.id,class:"p-2 border rounded"},[t("div",null,[e[31]||(e[31]=t("strong",null,"Data:",-1)),d(" "+s(o.date),1)]),t("div",null,[e[32]||(e[32]=t("strong",null,"Samopoczucie:",-1)),d(" "+s(o.moodScore),1)]),t("div",null,[e[33]||(e[33]=t("strong",null,"Czynniki:",-1)),d(" "+s(o.moodInfluencingFactors.join(", ")),1)]),t("div",null,[e[34]||(e[34]=t("strong",null,"Pozytywne wydarzenia:",-1)),d(" "+s(o.positiveEvents),1)]),t("div",null,[e[35]||(e[35]=t("strong",null,"Negatywne wydarzenia:",-1)),d(" "+s(o.negativeEvents),1)]),t("div",null,[e[36]||(e[36]=t("strong",null,"Wpływ wydarzeń:",-1)),d(" "+s(o.eventsImpact),1)]),t("div",null,[e[37]||(e[37]=t("strong",null,"Leki:",-1)),d(" "+s(o.tookMedication?"Tak":"Nie"),1)]),o.tookMedication?r("",!0):(i(),l("div",H,[e[38]||(e[38]=t("strong",null,"Powód:",-1)),d(" "+s(o.medicationNotTakenReason),1)])),t("div",null,[e[39]||(e[39]=t("strong",null,"Efekty uboczne:",-1)),d(" "+s(o.sideEffectsOccurred?"Tak":"Nie"),1)]),o.sideEffectsOccurred?(i(),l("div",L,[e[40]||(e[40]=t("strong",null,"Opis:",-1)),d(" "+s(o.sideEffectsDescription),1)])):r("",!0),t("div",null,[e[41]||(e[41]=t("strong",null,"Po lekach:",-1)),d(" "+s(o.postMedicationFeeling),1)]),t("div",null,[e[42]||(e[42]=t("strong",null,"Skuteczność:",-1)),d(" "+s(o.medicationEffectiveness),1)]),o.medicationEffectiveness==="no"?(i(),l("div",Z,[e[43]||(e[43]=t("strong",null,"Powód:",-1)),d(" "+s(o.medicationEffectivenessReason),1)])):r("",!0)]))),128))]))])]))}});export{Q as default};
