{"file":"mood-history-BYpEqNyu.js","mappings":";;;;;;;;;AAiBM,UAAA,SAAS,GAAG,aAAa;AAEX,QAA8B,IAAI;AACnC,QAAW,CAAE,CAAA;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/patient/mood-history.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-4\">\r\n    <h2 class=\"text-2xl font-bold mb-4\">Historia Nastroju</h2>\r\n    <canvas ref=\"chartCanvas\" class=\"w-full max-w-3xl mx-auto\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\ndefinePageMeta({\r\n  layout: 'patient',\r\n  middleware: 'auth',\r\n})\r\n\r\nimport { ref, onMounted } from 'vue'\r\nimport axios from 'axios'\r\nimport { Chart, registerables } from 'chart.js'\r\n\r\nChart.register(...registerables)\r\n\r\nconst chartCanvas = ref<HTMLCanvasElement | null>(null)\r\nconst surveyData = ref<any[]>([])\r\n\r\nasync function loadSurveyHistory() {\r\n  try {\r\n    const patientId = localStorage.getItem('patientId') || ''\r\n    const response = await axios.get('http://localhost:3000/surveys', {\r\n      params: { patientId }\r\n    })\r\n    surveyData.value = response.data\r\n  } catch (error) {\r\n    console.error('Błąd podczas pobierania ankiet:', error)\r\n  }\r\n}\r\n\r\nfunction renderChart() {\r\n  if (!chartCanvas.value) return\r\n\r\n  const labels = surveyData.value.map((survey: any) => survey.date)\r\n  const moodScores = surveyData.value.map((survey: any) => survey.moodScore)\r\n\r\n  const ctx = chartCanvas.value.getContext('2d')\r\n  if (!ctx) return\r\n\r\n  new Chart(ctx, {\r\n    type: 'line',\r\n    data: {\r\n      labels,\r\n      datasets: [\r\n        {\r\n          label: 'Ocena Nastroju',\r\n          data: moodScores,\r\n          borderColor: 'rgb(75, 192, 192)',\r\n          backgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n          fill: true,\r\n          tension: 0.3,\r\n        },\r\n      ],\r\n    },\r\n    options: {\r\n      responsive: true,\r\n      plugins: {\r\n        legend: {\r\n          position: 'top',\r\n        },\r\n        title: {\r\n          display: true,\r\n          text: 'Trend Nastroju',\r\n        },\r\n      },\r\n      scales: {\r\n        y: {\r\n          min: 1,\r\n          max: 10,\r\n          ticks: {\r\n            stepSize: 1,\r\n          },\r\n        },\r\n      },\r\n    },\r\n  })\r\n}\r\n\r\nonMounted(async () => {\r\n  await loadSurveyHistory()\r\n  renderChart()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\ncanvas {\r\n  max-width: 100%;\r\n  height: auto;\r\n}\r\n</style>\r\n"],"version":3}