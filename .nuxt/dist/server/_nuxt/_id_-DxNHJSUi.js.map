{"version":3,"file":"_id_-DxNHJSUi.js","sources":["../../../../pages/doctor/patients/[id].vue"],"sourcesContent":["<template>\r\n  <div class=\"p-4\">\r\n    <h1 class=\"text-3xl font-bold mb-4\">Szczegóły Pacjenta</h1>\r\n    <div v-if=\"loading\" class=\"text-center\">Ładowanie...</div>\r\n    <div v-else-if=\"patient\">\r\n      <p><strong>Imię i nazwisko:</strong> {{ patient.name }}</p>\r\n      <p><strong>Email:</strong> {{ patient.email }}</p>\r\n      <p><strong>Telefon:</strong> {{ patient.phone }}</p>\r\n      <h2 class=\"text-2xl font-semibold mt-4\">Historia Ankiet</h2>\r\n      <ul>\r\n        <li v-for=\"survey in surveys\" :key=\"survey.id\" class=\"border p-2 my-2\">\r\n          <p><strong>Data:</strong> {{ survey.date }}</p>\r\n          <p><strong>Ocena nastroju:</strong> {{ survey.moodScore }}</p>\r\n          <nuxt-link :to=\"`/doctor/patients/${patient.id}/surveys/${survey.id}`\" class=\"text-blue-500 hover:underline\">\r\n            Szczegóły ankiety\r\n          </nuxt-link>\r\n        </li>\r\n      </ul>\r\n      <nuxt-link to=\"/doctor/dashboard\" class=\"text-blue-500 hover:underline\">\r\n        Powrót do listy pacjentów\r\n      </nuxt-link>\r\n    </div>\r\n    <div v-else>\r\n      <p>Pacjent nie znaleziony</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport axios from 'axios'\r\n\r\ndefinePageMeta({\r\n  layout: 'doctor',\r\n  middleware: 'auth',\r\n})\r\n\r\nconst route = useRoute()\r\nconst patient = ref<any>(null)\r\nconst surveys = ref<any[]>([])\r\nconst loading = ref(true)\r\n\r\nonMounted(async () => {\r\n  const patientId = route.params.id as string\r\n  try {\r\n    const token = localStorage.getItem('token')\r\n    const patientResponse = await axios.get(`http://localhost:3000/patients/${patientId}`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n    patient.value = patientResponse.data\r\n\r\n    const surveysResponse = await axios.get(`http://localhost:3000/patients/${patientId}/surveys`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n    surveys.value = surveysResponse.data\r\n  } catch (error) {\r\n    console.error('Błąd podczas pobierania szczegółów pacjenta:', error)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAsCc,aAAS;AACjB,UAAA,UAAU,IAAS,IAAI;AACvB,UAAA,UAAU,IAAW,EAAE;AACvB,UAAA,UAAU,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}