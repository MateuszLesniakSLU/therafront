{"version":3,"file":"patients-BM8LqWIu.js","sources":["../../../../pages/doctor/patients.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1 class=\"text-2xl font-bold mb-6\">Pacjenci</h1>\r\n    <table class=\"min-w-full bg-white shadow-md rounded\">\r\n      <thead>\r\n      <tr class=\"bg-mint-green text-gray-800\">\r\n        <th class=\"text-left p-4\">Imię i Nazwisko</th>\r\n        <th class=\"text-left p-4\">Ostatnia Ankieta</th>\r\n        <th class=\"text-left p-4\">Średni Nastrój</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"patient in patients\" :key=\"patient._id\" class=\"hover:bg-gray-100\">\r\n        <td class=\"p-4\">{{ patient.name }}</td>\r\n        <td class=\"p-4\">{{ patient.lastSurvey || \"Brak\" }}</td>\r\n        <td class=\"p-4\">{{ patient.moodAverage ?? \"Brak danych\" }}</td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\n\r\ndefinePageMeta({\r\n  layout: 'doctor',\r\n  middleware: 'auth',\r\n});\r\n\r\nconst patients = ref([]);\r\n\r\nasync function fetchPatients() {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await axios.get('http://localhost:3000/patients', {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n\r\n    patients.value = response.data.map((patient) => ({\r\n      _id: patient._id,\r\n      name: patient.name,\r\n      lastSurvey: patient.lastSurveyDate || \"Brak\",\r\n      moodAverage: patient.moodAverage ?? \"Brak danych\",\r\n    }));\r\n  } catch (error) {\r\n    console.error('Błąd podczas pobierania pacjentów:', error);\r\n  }\r\n}\r\n\r\nonMounted(fetchPatients);\r\n</script>\r\n"],"names":[],"mappings":";;;;;;;AA+BA,UAAM,WAAW,IAAI,CAAA,CAAE;;;;;;;;;;;;;;;;"}